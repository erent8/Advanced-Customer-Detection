# OpenCV MÃ¼ÅŸteri Analiz Sistemi - Cursor KurallarÄ±

## Proje Genel KurallarÄ±

### ğŸ¯ Proje AmacÄ±
GÃ¼mÃ¼ÅŸ takÄ± ve saat dÃ¼kkÃ¢nÄ± iÃ§in OpenCV ve YOLOv8 kullanarak mÃ¼ÅŸteri analiz sistemi geliÅŸtirmek

### ğŸ“‹ Kodlama StandartlarÄ±

#### Python Kodlama KurallarÄ±
- **PEP 8** standartlarÄ±na uygun kod yazÄ±mÄ±
- TÃ¼rkÃ§e yorumlar ve deÄŸiÅŸken aÃ§Ä±klamalarÄ± kullan
- Fonksiyon ve sÄ±nÄ±f isimleri Ä°ngilizce, yorumlar TÃ¼rkÃ§e
- Her fonksiyonun baÅŸÄ±nda docstring bulundur

#### Dosya Organizasyonu
```
src/
â”œâ”€â”€ core/           # Ana iÅŸlem modÃ¼lleri
â”œâ”€â”€ models/         # ML modelleri ve weights
â”œâ”€â”€ utils/          # YardÄ±mcÄ± fonksiyonlar
â”œâ”€â”€ config/         # KonfigÃ¼rasyon dosyalarÄ±
â”œâ”€â”€ data/           # Veri depolama
â””â”€â”€ ui/             # KullanÄ±cÄ± arayÃ¼zÃ¼
```

#### Kod YazÄ±m KurallarÄ±
- Sabitler BÃœYÃœK_HARFLE yazÄ±lsÄ±n
- DeÄŸiÅŸkenler snake_case formatÄ±nda
- SÄ±nÄ±flar PascalCase formatÄ±nda
- Her modÃ¼l iÃ§in __init__.py dosyasÄ± oluÅŸtur

### ğŸ”§ Teknoloji KurallarÄ±

#### Gerekli KÃ¼tÃ¼phaneler
- **OpenCV**: GÃ¶rÃ¼ntÃ¼ iÅŸleme ve kamera eriÅŸimi
- **YOLOv8/Ultralytics**: Ä°nsan tespiti
- **MediaPipe**: Alternatif tespit sistemi (opsiyonel)
- **face_recognition**: YÃ¼z tanÄ±ma (opsiyonel)
- **pandas**: Veri analizi
- **matplotlib/seaborn**: GÃ¶rselleÅŸtirme
- **sqlite3**: Veri depolama

#### Performans KurallarÄ±
- FPS deÄŸeri minimum 15, ideal 30
- Memory leak kontrolÃ¼ yap
- Tkinter timer sistemi kullan (threading yerine)
- Thread-safe UI gÃ¼ncellemeleri

### ğŸ“Š Veri YÃ¶netimi

#### Veri Saklama
- SQLite veritabanÄ± kullan (Ã¼retim iÃ§in)
- CSV backup dosyalarÄ± oluÅŸtur
- KiÅŸisel veri koruma kurallarÄ±na uy
- YÃ¼z verileri hash'lenmiÅŸ ÅŸekilde sakla

#### Log Sistemi
- Her iÅŸlem iÃ§in timestamp
- Error logging mecburi
- Daily log rotation
- Debug modunda detaylÄ± log

### ğŸš€ GeliÅŸtirme AÅŸamalarÄ±

#### AÅŸama 1: Temel Sistem âœ…
- Kamera giriÅŸi
- Ä°nsan tespiti
- Temel UI
- Thread-safe gÃ¶rÃ¼ntÃ¼ gÃ¼ncellemesi

#### AÅŸama 2: Veri KayÄ±t ğŸ”„
- ZiyaretÃ§i sayÄ±mÄ±
- Zaman damgasÄ±
- CSV export
- SQLite entegrasyonu

#### AÅŸama 3: Ã‡alÄ±ÅŸan TanÄ±ma
- YÃ¼z veritabanÄ±
- Face recognition
- Filtreleme

#### AÅŸama 4: Demografik Analiz
- YaÅŸ tahmini
- Cinsiyet tespiti
- Ä°statistik

#### AÅŸama 5: Analytics
- YoÄŸunluk analizi
- GÃ¶rselleÅŸtirme
- Raporlama

#### AÅŸama 6: Ä°leri Ã–zellikler
- Geri gelen mÃ¼ÅŸteri tespiti
- Dashboard
- UyarÄ± sistemi

### âš¡ Optimizasyon KurallarÄ±

#### GÃ¶rÃ¼ntÃ¼ Ä°ÅŸleme
- Frame resize ile performans artÄ±rÄ±mÄ± (640x480 iÅŸlem boyutu)
- ROI (Region of Interest) kullanÄ±mÄ±
- Timer-based UI gÃ¼ncellemeleri (33ms = 30 FPS)
- Memory management ve image referans temizliÄŸi

#### ML Model Optimizasyonu
- YOLOv8n kullanÄ±mÄ± (nano model - hÄ±zlÄ±)
- CPU/GPU otomatik algÄ±lama
- Model caching
- Batch inference (gelecek sÃ¼rÃ¼mlerde)

### ğŸ”’ GÃ¼venlik ve Gizlilik

#### Veri GÃ¼venliÄŸi
- YÃ¼z verilerini hash'le
- Local storage kullan
- Network eriÅŸimi minimize et
- GDPR uyumlu veri iÅŸleme

#### Sistem GÃ¼venliÄŸi
- Input validation
- Exception handling
- Graceful shutdown
- Backup mekanizmasÄ±

### ğŸ“± UI/UX KurallarÄ±

#### ArayÃ¼z TasarÄ±mÄ±
- TÃ¼rkÃ§e arayÃ¼z
- Kolay kullanÄ±m
- Real-time gÃ¼ncellemeler
- Thread-safe widget gÃ¼ncellemeleri
- Responsive design

#### KullanÄ±cÄ± Deneyimi
- Loading indicators
- Error mesajlarÄ±
- Status bar gÃ¼ncellemeleri
- Screenshot alma Ã¶zelliÄŸi
- Dark mode friendly renkler

### ğŸ”„ Thread Safety KurallarÄ±

#### UI Thread Management
- **ASLA** background thread'lerden widget gÃ¼ncelleme yapma
- `root.after()` kullanarak timer-based gÃ¼ncellemeler
- Frame processing'i background'da, UI gÃ¼ncellemeyi main thread'de
- Image reference'larÄ± dÃ¼zgÃ¼n yÃ¶net (`self.video_label.image = photo`)

#### Camera Thread Safety
- Frame callback'leri gÃ¼venli ÅŸekilde ekle/Ã§Ä±kar
- `current_image` thread-safe ÅŸekilde sakla
- Exception handling ile sistem kararlÄ±lÄ±ÄŸÄ±nÄ± saÄŸla

### ğŸ§ª Test KurallarÄ±

#### System Testing
- `test_requirements.py` ile kÃ¼tÃ¼phane kontrolÃ¼
- Kamera eriÅŸim testleri
- YOLOv8 model yÃ¼kleme testleri
- UI responsiveness testleri

#### Integration Testing
- End-to-end workflow
- Database iÅŸlemleri
- Screenshot alma
- Sistem baÅŸlatma/durdurma

### ğŸ“ DokÃ¼mantasyon

#### Kod DokÃ¼mantasyonu
- TÃ¼rkÃ§e yorumlar
- Fonksiyon aÃ§Ä±klamalarÄ±
- Thread safety notlarÄ±
- Performance ipuÃ§larÄ±

#### KullanÄ±cÄ± Rehberi
- Kurulum rehberi (quick_setup.ps1)
- Troubleshooting guide
- Kamera konfigÃ¼rasyonu
- Performance tuning

### ğŸ”§ Kurulum ve DaÄŸÄ±tÄ±m

#### Requirements Management
- `requirements.txt` - tam kurulum
- `requirements_minimal.txt` - Windows-friendly
- Dlib olmadan Ã§alÄ±ÅŸma desteÄŸi
- Visual Studio C++ build tools notlarÄ±

#### Platform Uyumluluk
- Windows 10/11 primary support
- Python 3.8-3.10 compatibility
- USB kamera desteÄŸi
- Built-in webcam desteÄŸi

### ğŸ› Debug ve Sorun Giderme

#### Common Issues
- Kamera indeksi problemleri (0,1,2 test)
- Thread safety UI donmalarÄ±
- Memory leak'ler (image references)
- Model yÃ¼kleme hatalarÄ±

#### Performance Monitoring
- FPS tracking
- Memory usage monitoring
- Detection confidence tuning
- UI responsiveness metrics

### ğŸ”„ Commit KurallarÄ±

#### Git Workflow
```
feat: Yeni Ã¶zellik ekleme
fix: Bug dÃ¼zeltme
docs: DokÃ¼mantasyon gÃ¼ncelleme
style: Kod formatÄ± dÃ¼zenleme
refactor: Kod refactoring
test: Test ekleme/dÃ¼zeltme
chore: Proje bakÄ±m iÅŸleri
```

#### Commit MesajlarÄ±
- TÃ¼rkÃ§e commit mesajlarÄ±
- AÃ§Ä±klayÄ±cÄ± baÅŸlÄ±klar
- Thread safety dÃ¼zeltmeleri belirt
- Performance iyileÅŸtirmelerini vurgula

### ğŸ“Š Current System Status

#### âœ… Working Features
- Real-time camera capture (1280x720@30fps)
- YOLOv8 human detection
- Thread-safe UI updates
- Screenshot functionality
- System start/stop controls
- FPS monitoring
- Status tracking

#### ğŸ”„ In Progress
- Visitor counting logic
- Data persistence (SQLite)
- Analytics dashboard
- Employee face recognition

#### âŒ Known Limitations
- Dlib not installed (Windows C++ compiler issues)
- No duplicate visitor prevention yet
- Basic analytics only

---

**Not**: Bu kurallar proje geliÅŸimi sÄ±rasÄ±nda gÃ¼ncellenebilir. Sistemin mevcut Ã§alÄ±ÅŸma durumu mÃ¼kemmel - kamera Ã§alÄ±ÅŸÄ±yor, YOLOv8 aktif, thread-safe UI gÃ¼ncellemeleri baÅŸarÄ±lÄ±. 